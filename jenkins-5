@Library('my-library') _
pipeline {
    agent any
    stages{
        stage('download'){
            steps{
                git 'https://github.com/gsureshkiran/my_javaapp.git'
            }
        }
        stage('compile'){
            steps{
              script{
                build.compile()
               }
              
            }
         stage('test'){
             steps{
               script{
                 test.test()
               }
             }
         }
        stage('junit'){
          steps{
           script{
             test.junit() 
          def failtests=testresult.failCount
           println "total no of failed count: $failtests"
           }
          }
        }
       stage('soanr){
         steps{
          script{
            test.sonar()
          }
         }
       }
      stage('package'){
        steps{
          script{
            build.build()
          }
        }
      }
        }
    }
}
